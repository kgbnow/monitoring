# monitoring
Prometheus+Grafana+Nginx

Склонировать репозиторий на VM1 и VM2.
Изменить IP VM2 в конфиге Prometheus.
Запустить Bash скрипты на соотвествующей машине.
Добавить источник данных в Grafana.
Импортировать Dashboards из json файлов в Grafana.



Цель: практические навыки по развертыванию и настройке систем мониторинга на базе Prometheus и Grafana.

Задание:

На облачной платформе Базис создать две ВМ.

ВМ1 (2 ядра 2 гига HDD 30 гб)
ВМ2 (1 ядро 1 гиг HDD 20 гб)
На машине ВМ1 поднять Prometheus. Prometheus должен иметь циклическую запись 10-20 дней и/или ограничение по размеру (https://www.robustperception.io/configuring-prometheus-storage-retention/), (https://laurvas.ru/prometheus-p3/#retention ).

На машине ВМ2 поднять Nginx, Grafana. (NGINX).

Все перечисленные сервисы должны управляться через systemd и стартовать при загрузке системы. (Не использовать docker).

На каждой машине настроить сбор следующих метрик:

ВМ1:
host metrics (метрики хоста: память, цпу, сеть, диски),
В качестве поставщика данных использовать node_exporter или telegraf.
ВМ2:
host metrics (метрики хоста: память, цпу, сеть, диски).
Метрики Nginx.
Все собираемые метрики необходимо отобразить в Grafana в виде графиков!

Графики должны иметь названия, подписанные значения, таблицу значений (min max current avg).

Для метрик хоста можно использовать готовые дашборды или создать свой.

Также требуется поднять и настроить Alertmanager, который должен отслеживать:

состояние Nginx (запущен/не запущен) и в случае падения Nginx (нет процесса nginx или systemd показывает статус  Active: inactive (dead) )
загрузку CPU > 90%
загрузку RAM > 90%
При возникновении критичных значений метрик отсылать уведомление в Телеграм через бота (бота зарегистрировать самостоятельно).

Использовать docker допускается только для Grafana. Все остальные сервисы должны быть установлены вручную и управляться через systemd.
